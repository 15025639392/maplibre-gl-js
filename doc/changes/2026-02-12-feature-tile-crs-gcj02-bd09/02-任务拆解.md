# 02 任务拆解

## 1. 里程碑划分（Raster Only）

- M1 方案冻结：明确首期仅支持 Raster，不含 Vector/GeoJSON
- M2 核心能力：坐标转换引擎与 Raster CRS 注册中心完成
- M3 链路接入：Raster source 请求链路接入并完成 API 联调
- M4 质量收敛：精度、回归、性能与稳定性测试完成
- M5 发布复盘：灰度上线、回滚演练、文档回写

## 2. 任务清单

| 编号 | 任务 | 负责人 | 预计工时 | 依赖 | 状态 |
| --- | --- | --- | --- | --- | --- |
| T-01 | 输出 ADR（Raster-only 边界、精度阈值、回滚门槛） | 架构负责人（待定） | 1d | 无 | todo |
| T-02 | 实现 `CoordTransformEngine`（WGS84/GCJ02/BD09） | 地图内核（待定） | 2d | T-01 | todo |
| T-03 | 实现 `RasterCrsRegistry`（仅管理 Raster source） | 地图内核（待定） | 1d | T-01 | todo |
| T-04 | 改造 Raster 请求链路接入 `RasterTileCrsAdapter` | 地图内核（待定） | 2d | T-02,T-03 | todo |
| T-05 | Map API 增加 `set/getRasterSourceCoordSystem` | 客户端（待定） | 1d | T-03 | todo |
| T-06 | tile cache key 增加 `crs` 维度并补齐观测指标 | 地图内核（待定） | 1d | T-04 | todo |
| T-07 | 补齐 Raster-only 单测与集成测试（精度/边界/回归） | QA + 开发（待定） | 2d | T-04,T-05,T-06 | todo |
| T-08 | 性能压测（Raster 请求耗时、帧率、内存） | 性能专项（待定） | 1d | T-07 | todo |
| T-09 | 灰度发布、开关降级与回滚演练 | 发布负责人（待定） | 1d | T-07,T-08 | todo |
| T-10 | 回写主文档与复盘沉淀 | 文档负责人（待定） | 0.5d | T-09 | todo |

## 3. 交付物清单

- 代码交付：Raster CRS 适配引擎、Raster API、缓存与观测改造
- 文档交付：ADR、变更包 `00~05`、主文档回写记录
- 验证交付：Raster 精度报告、性能报告、灰度观察报表
- 发布交付：发布记录、回滚演练记录、复盘结论

## 4. 排期与关键节点

- 2026-02-13：M1 完成（边界冻结）
- 2026-02-15：M2 完成（核心能力合入）
- 2026-02-17：M3 完成（链路接入与联调）
- 2026-02-19：M4 完成（测试与压测）
- 2026-02-20：M5 完成（灰度发布与复盘）

## 5. 阻塞项与协同需求

- 需明确首期 Raster 覆盖范围：是否包含 `raster-dem`（评审定版）；
- 需 QA 提供标准校准点位与对齐截图基线；
- 需发布侧提供 feature flag（`rasterSourceCrsEnabled`）灰度能力；
- 需监控侧提供 CRS 相关错误日志与性能看板。

## 6. 每日/每周同步机制

- 每日站会：跟踪 T-02~T-08 风险与阻塞
- 双日技术会：对齐转换精度、边界策略、缓存策略
- 每周里程碑评审：确认是否进入下一阶段
- 发布前门禁会：Raster-only 用例、性能、回滚演练全部通过后上线
