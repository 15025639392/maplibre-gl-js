# 02 任务拆解

## 1. 里程碑划分

- M1 方案冻结：完成 strict/legacy 边界定义与评审
- M2 主链路重构：投影工厂与 Projection/Transform 分离改造
- M3 兼容接入：Map 主循环、事件语义、配置开关接入
- M4 测试收敛：功能回归、性能压测、灰度演练
- M5 发布复盘：灰度放量、全量、回写主文档

## 2. 任务清单

| 编号 | 任务 | 负责人 | 预计工时 | 依赖 | 状态 |
| --- | --- | --- | --- | --- | --- |
| T-01 | 输出 ADR，明确 strict 与 legacy-hybrid 行为矩阵 | AI | 1d | 无 | done |
| T-02 | 改造 `projection_factory`，建立单投影创建路径 | AI | 1.5d | T-01 | done |
| T-03 | 改造 `globe_projection`，收敛内部双投影状态 | AI | 2d | T-02 | done |
| T-04 | 改造 `globe_transform` 与 `globe_camera_helper` | AI | 2d | T-03 | done |
| T-05 | 接入 `map.ts` 渲染循环与事件语义调整 | AI | 1.5d | T-04 | done |
| T-06 | 增加 `ProjectionRuntimeOptions` 与灰度开关 | AI | 1d | T-05 | done |
| T-07 | 补齐单元测试、集成回归、对比基线 | AI | 2d | T-05 | done |
| T-08 | 性能压测与线上灰度演练 | AI | 1.5d | T-07 | done |
| T-09 | 发布后回写主文档并完成复盘 | AI | 0.5d | T-08 | done |

## 3. 交付物清单

- 代码交付：strict 模式核心实现与 legacy-hybrid 回滚路径
- 配置交付：运行时开关与默认策略说明
- 测试交付：用例报告、回归记录、性能对比结论
- 文档交付：本变更包 `00~05`、ADR、主文档回写记录

## 4. 排期与关键节点

- 2026-02-13：M1 完成（方案评审通过）
- 2026-02-15：M2 完成（核心改造合入）
- 2026-02-17：M3 完成（兼容与开关接入）
- 2026-02-19：M4 完成（测试与灰度演练）
- 2026-02-20：M5 完成（灰度发布与复盘）

## 5. 阻塞项与协同需求

- 需要产品确认 strict 模式是否作为后续默认行为；
- 需要 QA 增补临界缩放场景回归集；
- 需要性能环境覆盖多机型 Globe 场景；
- 需要文档窗口同步事件语义更新。

## 6. 每日/每周同步机制

- 每日站会：跟踪 T-03 到 T-07 风险项
- 每两日技术同步：对齐投影语义与回滚策略
- 每周里程碑评审：确认是否进入下一阶段
- 发布前门禁会：测试、性能、回滚演练全部通过后上线
