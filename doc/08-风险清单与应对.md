# 08 风险清单与应对

## 1. 风险管理目标

- 识别二次开发过程中的技术与协作风险；
- 建立“可监控、可预警、可处置”的风险机制；
- 将风险治理纳入日常迭代流程。

## 2. 风险台账（初版）

| ID | 风险 | 概率 | 影响 | 触发信号 | 应对策略 |
| --- | --- | --- | --- | --- | --- |
| R-01 | 本地与 CI 环境不一致导致回归失真 | 高 | 高 | 本地通过 CI 失败/反之 | 统一环境、锁版本、脚本化校验 |
| R-02 | 模块拆分过程引入隐性行为变更 | 中 | 高 | 渲染差异、事件顺序变化 | 小步重构 + 快照回归 + 特性开关 |
| R-03 | 扩展能力演进破坏旧 API | 中 | 高 | 业务升级报错 | 兼容层 + 迁移文档 + 灰度验证 |
| R-04 | 性能优化收益不稳定 | 中 | 中 | 场景间波动大 | 固定基准场景 + 多轮采样 |
| R-05 | 技术债治理被功能挤压 | 高 | 中 | 治理任务长期延期 | 固定容量占比 + 里程碑硬约束 |
| R-06 | 团队对新架构认知不一致 | 中 | 中 | 评审反复、返工增加 | 架构宣贯 + 模板化设计评审 |

## 3. 风险分级标准

- 概率：低/中/高
- 影响：低/中/高
- 优先处理：`高概率&高影响`、`中概率&高影响`

## 4. 监控机制

每周必须更新以下监控项：

- 质量门禁失败率（lint/typecheck/test）；
- 高优缺陷新增/关闭趋势；
- 关键性能指标波动；
- 技术债燃尽趋势。

## 5. 风险响应流程

```text
发现风险 -> 记录台账 -> 指定 Owner -> 制定措施 -> 跟踪状态 -> 复盘归档
```

状态建议：

- `Open`：已识别未处理
- `Mitigating`：处理中
- `Monitoring`：已缓解需观察
- `Closed`：关闭

## 6. 升级机制

以下情况需升级到项目负责人决策：

- 高风险项连续两周无缓解；
- 影响里程碑交付日期；
- 可能导致兼容性事故或回滚。

## 7. 复盘要求

每次重大风险关闭后，需输出：

- Root Cause
- 处置过程
- 成本评估
- 预防措施

## 8. 关联文档

- 路线图：`07-开发路线图与里程碑.md`
- 兼容发布：`06-向后兼容与发布策略.md`
- 模板：`09-执行模板与验收标准.md`

## 9. 投影分离重构风险

### 9.1 风险识别

| ID | 风险 | 概率 | 影响 | 触发信号 | 应对策略 |
| --- | --- | --- | --- | --- | --- |
| R-07 | Globe 渲染在高缩放级别可能与 legacy 模式存在视觉差异 | 中 | 中 | 用户反馈渲染不一致 | 保留 legacy-hybrid 作为回退，提供视觉对比文档 |
| R-08 | 遗留代码可能隐式依赖混合过渡行为 | 中 | 中 | 严格模式下功能异常 | 渐进式迁移，至少保留一个发布周期的 legacy-hybrid |

### 9.2 风险等级

**总体风险等级：中等**（通过渐进式发布策略缓解）

### 9.3 缓解措施

- **保留回退路径**：legacy-hybrid 模式作为默认值，至少保留一个发布周期
- **渐进式启用**：通过配置开关控制，新项目可先行启用严格模式
- **监控指标**：观察严格模式下的渲染异常率和用户反馈
- **文档完善**：明确说明严格模式与 legacy 模式的差异和适用场景
